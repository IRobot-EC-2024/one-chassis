# one-chassis

1、使用西交利物浦和广工开源提到的功率闭环：增加了机械功率。（公式待补充）

2、6020的功率计算没有验证过，是根据公式算出来的参数。但我认为限制轮6020的输出上限和KP后其实可以不用考虑功率，6020平常功率很小，转向那下很大。

3、增加超级电容的使用逻辑：飞坡、加速、普通和充电模式（还没写）。飞坡把最大上限功率拉到能飞坡的那个功率，加速即简单的在裁判系统功率的基础上加了15w，普通模式直接使用裁判系统功率，充电模式（如有，目前是把原地小陀螺转速改低，小陀螺即充电）减5w。同时，当电压高于一定值时，自动使用加速模式。添加电容低电压保护。

4、修改速度分配的逻辑。先确定：电容使用模式 -> 功率上限 -> 速度 -> pid -> 功率闭环和缓冲功率保护。
